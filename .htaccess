RewriteEngine On
### 1. Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
### 2. Remove .html from URLs
# Redirect page.html â†’ page
RewriteCond %{THE_REQUEST} \s/+([^\s]+)\.html[\s?] [NC]
RewriteRule ^ %1 [R=301,L]
# Load page.html internally
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([^/]+)/?$ $1.html [L]
### 3. Hotlink Protection (SAFE VERSION)
RewriteCond %{REQUEST_URI} \.(jpg|jpeg|gif|png|bmp)$ [NC]
RewriteCond %{HTTP_REFERER} !^https?://(www\.)?raybale\.com [NC]
RewriteCond %{HTTP_REFERER} !=""
RewriteRule .*\.(jpg|jpeg|gif|png|bmp)$ - [F,NC]
### 4. PHP Handler
<FilesMatch ".(?:html|php)$">
    SetHandler application/x-httpd-alt-phpXX
</FilesMatch>
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/raybweki/raybale-backend"
PassengerBaseURI "/"
PassengerNodejs "/home/raybweki/nodevenv/raybale-backend/24/bin/node"
PassengerAppType node
PassengerStartupFile app.js
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION BEGIN
<IfModule Litespeed>
SetEnv RECAPTCHA_SECRET 6Lft7CUsAAAAAP616hwC6MkJvCrmAs-QICK5hIo3
</IfModule>
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION END